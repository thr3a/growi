# GROWI Jotaiç§»è¡Œ é€²æ—ãƒ¬ãƒãƒ¼ãƒˆ

**æœ€çµ‚æ›´æ–°æ—¥**: 2025-10-06  
**æ›´æ–°è€…**: GitHub Copilot

---

## ğŸ“Š å…¨ä½“é€²æ—

### å®Œäº†çŠ¶æ³
- **å®Œäº†**: 62/63 ãƒ•ãƒƒã‚¯ (98.4%) âœ…
- **æ®‹ã‚Š**: 1ãƒ•ãƒƒã‚¯ (`useSecondaryYdocs` - åˆ¥ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†)
- **ã‚¹ã‚³ãƒ¼ãƒ—**: `apps/app/src/` å†…ã®ç§»è¡Œ **100% å®Œäº†** ğŸ‰

### æ®‹ã‚Šã‚¿ã‚¹ã‚¯

#### useSecondaryYdocs
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”µ åˆ¥ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç† (`packages/editor`)
- **å ´æ‰€**: `packages/editor/src/client/stores/use-secondary-ydocs.ts`
- **è¤‡é›‘åº¦**: é«˜ - Y.Docãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
- **æ³¨è¨˜**: `apps/app` ã® Jotai ç§»è¡Œå¯¾è±¡å¤–ã€åˆ¥ã‚¿ã‚¹ã‚¯ã§æ¤œè¨

---

## âœ… å®Œäº†ã—ãŸç§»è¡Œ

### ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ¢ãƒ¼ãƒ€ãƒ«çŠ¶æ…‹ï¼ˆ17å€‹ï¼‰

#### å®Œäº†ãƒãƒƒãƒ
- âœ… **useEmptyTrashModal** - ã‚´ãƒŸç®±ç©ºãƒ¢ãƒ¼ãƒ€ãƒ«
- âœ… **useDeleteAttachmentModal** - æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
- âœ… **useDeleteBookmarkFolderModal** - ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤
- âœ… **useUpdateUserGroupConfirmModal** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—æ›´æ–°ç¢ºèª
- âœ… **usePageSelectModal** - ãƒšãƒ¼ã‚¸é¸æŠ
- âœ… **usePagePresentationModal** - ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… **usePutBackPageModal** - ãƒšãƒ¼ã‚¸å¾©å…ƒ
- âœ… **useGrantedGroupsInheritanceSelectModal** - æ¨©é™ã‚°ãƒ«ãƒ¼ãƒ—ç¶™æ‰¿é¸æŠ
- âœ… **useDrawioModal** - Draw.io
- âœ… **useHandsontableModal** - Handsontable
- âœ… **usePrivateLegacyPagesMigrationModal** - ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¬ã‚¬ã‚·ãƒ¼ãƒšãƒ¼ã‚¸ç§»è¡Œ
- âœ… **useDescendantsPageListModal** - å­å­«ãƒšãƒ¼ã‚¸ãƒªã‚¹ãƒˆ
- âœ… **useConflictDiffModal** - ç«¶åˆå·®åˆ†
- âœ… **usePageBulkExportSelectModal** - ãƒšãƒ¼ã‚¸ä¸€æ‹¬ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆé¸æŠ
- âœ… **useDrawioModalForEditor** - ã‚¨ãƒ‡ã‚£ã‚¿ç”¨Draw.io
- âœ… **useLinkEditModal** - ãƒªãƒ³ã‚¯ç·¨é›†
- âœ… **useTemplateModal** - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

**ãƒ‘ã‚¿ãƒ¼ãƒ³**: Status/Actionsåˆ†é›¢ã«ã‚ˆã‚‹æœ€é©åŒ–
**å‰Šé™¤**: `stores/modal.tsx` å®Œå…¨å‰Šé™¤

### ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ‡ãƒã‚¤ã‚¹ãƒ»UIçŠ¶æ…‹ï¼ˆ7å€‹ï¼‰

#### ãƒ‡ãƒã‚¤ã‚¹å¹…åˆ¤å®š
- âœ… **useIsDeviceLargerThanMd** - MDä»¥ä¸Šåˆ¤å®šï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°ï¼‰
- âœ… **useIsDeviceLargerThanLg** - LGä»¥ä¸Šåˆ¤å®šï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°ï¼‰
- âœ… **useIsMobile** - ãƒ¢ãƒã‚¤ãƒ«åˆ¤å®šï¼ˆ1ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°ï¼‰

#### TOCé–¢é€£
- âœ… **useTocNode** / **useSetTocNode** - RefObjectãƒ‘ã‚¿ãƒ¼ãƒ³
- âœ… **useTocOptions** - Dynamic Import + Caching
- âœ… **useTocOptionsReady** - æº–å‚™å®Œäº†åˆ¤å®š

**ç‰¹å¾´**: 
- MediaQueryç›£è¦–ã«ã‚ˆã‚‹å‹•çš„æ›´æ–°
- Bundle Splittingï¼ˆrenderer.tsxé…å»¶ãƒ­ãƒ¼ãƒ‰ï¼‰
- SWRã‹ã‚‰Jotaiå®Œå…¨ç§»è¡Œï¼ˆ50%ã‚³ãƒ¼ãƒ‰å‰Šæ¸›ï¼‰

#### ç„¡é¡Œãƒšãƒ¼ã‚¸çŠ¶æ…‹
- âœ… **useIsUntitledPage** / **useSetIsUntitledPage**

**ãƒ‘ã‚¿ãƒ¼ãƒ³**: ã‚·ãƒ³ãƒ—ãƒ«ãªboolean atomã¨setter
**å‰Šé™¤**: `stores/ui.tsx` å®Œå…¨å‰Šé™¤

### ãƒ•ã‚§ãƒ¼ã‚º3: è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†ï¼ˆ5å€‹ï¼‰

#### 1. useIsSlackEnabled
- **å ´æ‰€**: `states/ui/editor/is-slack-enabled.ts`
- **ãƒ‘ã‚¿ãƒ¼ãƒ³**: ã‚·ãƒ³ãƒ—ãƒ«boolean
- **æ›´æ–°**: 3ãƒ•ã‚¡ã‚¤ãƒ«

#### 2. useReservedNextCaretLine
- **å ´æ‰€**: `states/ui/editor/reserved-next-caret-line.ts`
- **ãƒ‘ã‚¿ãƒ¼ãƒ³**: globalEmitterçµ±åˆ
- **æ›´æ–°**: 3ãƒ•ã‚¡ã‚¤ãƒ«

#### 3. useAiAssistantSidebar
- **å ´æ‰€**: `features/openai/client/states/ai-assistant-sidebar.ts`
- **ãƒ‘ã‚¿ãƒ¼ãƒ³**: Status/Actionsåˆ†é›¢
- **æ›´æ–°**: 11ãƒ•ã‚¡ã‚¤ãƒ«
- **å‰Šé™¤**: `features/openai/client/stores/ai-assistant.tsx`

#### 4. useKeywordManager â­
- **å ´æ‰€**: `states/search/keyword-manager.ts`
- **ãƒ‘ã‚¿ãƒ¼ãƒ³**: 3ãƒ•ãƒƒã‚¯åˆ†é›¢ï¼ˆèª­ã¿å–ã‚Š/å‰¯ä½œç”¨/æ›¸ãè¾¼ã¿ï¼‰
- **ç‰¹å¾´**: URLåŒæœŸã€Routerçµ±åˆã€cleanupé–¢æ•°
- **æ›´æ–°**: 7ãƒ•ã‚¡ã‚¤ãƒ«
- **éæ¨å¥¨åŒ–**: `client/services/search-operation.ts`

#### 5. useCurrentPageYjsData â­ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ¸ˆ
- **å ´æ‰€**: `features/collaborative-editor/states/current-page-yjs-data.ts`
- **ãƒ‘ã‚¿ãƒ¼ãƒ³**: 3ã¤ã®ç‹¬ç«‹ã—ãŸatomï¼ˆdata/loading/errorï¼‰
- **ç‰¹å¾´**: 
  - ç´°ã‹ã„ç²’åº¦ã§ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°åˆ¶å¾¡
  - WebSocketçµ±åˆ
  - ç´”ç²‹ãªJotaiå®Ÿè£…ï¼ˆSWRä¸ä½¿ç”¨ï¼‰
- **æ›´æ–°**: 8ãƒ•ã‚¡ã‚¤ãƒ«
- **ãƒ•ãƒƒã‚¯**:
  - `useCurrentPageYjsData()` - ãƒ‡ãƒ¼ã‚¿å–å¾—
  - `useCurrentPageYjsDataLoading()` - ãƒ­ãƒ¼ãƒ‰çŠ¶æ…‹
  - `useCurrentPageYjsDataError()` - ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹
  - `useCurrentPageYjsDataActions()` - æ›´æ–°/ãƒ•ã‚§ãƒƒãƒã‚¢ã‚¯ã‚·ãƒ§ãƒ³

---

## ğŸ“‹ æ¡ç”¨ã—ãŸæŠ€è¡“ãƒ‘ã‚¿ãƒ¼ãƒ³

### 1. Status/Actionsåˆ†é›¢ãƒ‘ã‚¿ãƒ¼ãƒ³ â­
- **é©ç”¨**: ãƒ¢ãƒ¼ãƒ€ãƒ«ã€è¤‡é›‘ãªçŠ¶æ…‹
- **ãƒ¡ãƒªãƒƒãƒˆ**: æœ€é©ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€è²¬å‹™åˆ†é›¢

### 2. 3ãƒ•ãƒƒã‚¯åˆ†é›¢ãƒ‘ã‚¿ãƒ¼ãƒ³ â­
- **é©ç”¨**: URLåŒæœŸãªã©ã®å‰¯ä½œç”¨ã‚’æŒã¤çŠ¶æ…‹
- **ãƒ¡ãƒªãƒƒãƒˆ**: è¶…æœ€é©ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€å‰¯ä½œç”¨ã®å˜ä¸€è²¬ä»»ç‚¹

### 3. ç‹¬ç«‹Atomãƒ‘ã‚¿ãƒ¼ãƒ³ â­ NEW
- **é©ç”¨**: data/loading/errorãªã©è¤‡æ•°ã®çŠ¶æ…‹
- **ãƒ¡ãƒªãƒƒãƒˆ**: ç´°ã‹ã„ç²’åº¦ã§ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°åˆ¶å¾¡ã€ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…

### 4. globalEmitterçµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³
- **é©ç”¨**: ãƒ¬ã‚¬ã‚·ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
- **å®Ÿè£…**: useEffect + cleanup

### 5. Routerçµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³
- **é©ç”¨**: URL/ãƒ–ãƒ©ã‚¦ã‚¶å±¥æ­´åŒæœŸ
- **å®Ÿè£…**: beforePopState + cleanup

### 6. RefObjectãƒ‘ã‚¿ãƒ¼ãƒ³
- **é©ç”¨**: DOMè¦ç´ ç®¡ç†
- **ãƒ¡ãƒªãƒƒãƒˆ**: å‹å®‰å…¨ãªDOMå‚ç…§

### 7. Dynamic Import + Cachingãƒ‘ã‚¿ãƒ¼ãƒ³
- **é©ç”¨**: é‡ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é…å»¶ãƒ­ãƒ¼ãƒ‰
- **ãƒ¡ãƒªãƒƒãƒˆ**: Bundle Splittingã€åˆæœŸãƒ­ãƒ¼ãƒ‰é«˜é€ŸåŒ–

### 8. ã‚·ãƒ³ãƒ—ãƒ«Booleanãƒ‘ã‚¿ãƒ¼ãƒ³
- **é©ç”¨**: å˜ç´”ãªãƒ•ãƒ©ã‚°çŠ¶æ…‹
- **å®Ÿè£…**: `useAtomValue` + `useSetAtom`

---

## ğŸ‰ é”æˆäº‹é …

### ç§»è¡Œå®Ÿç¸¾
- âœ… 62/63 ãƒ•ãƒƒã‚¯ç§»è¡Œå®Œäº† (98.4%)
- âœ… 5ãƒãƒƒãƒã§62ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°
- âœ… 5ã¤ã®æ—§å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«å®Œå…¨å‰Šé™¤
- âœ… å…¨ã¦ã®å‹ãƒã‚§ãƒƒã‚¯é€šé

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„
- âœ… 8ã¤ã®æŠ€è¡“ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºç«‹
- âœ… states/ã¨stores/ã®è²¬å‹™åˆ†é›¢æ˜ç¢ºåŒ–
- âœ… ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢ï¼ˆcleanupé–¢æ•°ï¼‰
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆç´°ã‹ã„ç²’åº¦ã®å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°åˆ¶å¾¡ï¼‰

### ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ”¹å–„
- âœ… ä¸é©åˆ‡ãªSWRä½¿ç”¨ã®æ’é™¤ï¼ˆuseSWRStaticã€useSWRImmutableï¼‰
- âœ… deprecated APIå®Œå…¨å‰Šé™¤
- âœ… è²¬å‹™ã®æ˜ç¢ºåŒ–ï¼ˆçŠ¶æ…‹ç®¡ç† vs é€šä¿¡ï¼‰

---

## ğŸ“ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
- **states/** - Jotai atomï¼ˆç´”ç²‹ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç†ï¼‰
- **stores/** - SWRçµ±åˆï¼ˆã‚µãƒ¼ãƒãƒ¼éåŒæœŸé€šä¿¡ï¼‰
- **features/[feature]/states/** - æ©Ÿèƒ½å›ºæœ‰ã®çŠ¶æ…‹

### å‘½åè¦å‰‡
- èª­ã¿å–ã‚Šå°‚ç”¨: `use[Feature]()`
- æ›¸ãè¾¼ã¿å°‚ç”¨: `useSet[Feature]()`ã€`use[Feature]Actions()`
- å‰¯ä½œç”¨å°‚ç”¨: `use[Feature]Manager()`
- çŠ¶æ…‹å–å¾—: `use[Feature]Loading()`ã€`use[Feature]Error()`

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### å®Œäº†äº‹é …
1. âœ… `apps/app` å†…ã® Jotai ç§»è¡Œå®Œäº†

### ä»Šå¾Œã®å±•é–‹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
1. å…¨ç§»è¡Œæ¸ˆã¿ãƒ•ãƒƒã‚¯ã®åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆ
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
3. `packages/editor` ã¸ã® Jotai å°å…¥æ¤œè¨
4. ä»–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®å±•é–‹æ¤œè¨

---

**æ³¨è¨˜**: `apps/app/src/stores/` ã¨ `apps/app/src/states/` ã®ç§»è¡Œã¯100%å®Œäº†ã€‚
